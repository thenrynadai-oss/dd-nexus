<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vasteria Gate ‚Äî Hub</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="home.css" />

  <script>
  // Aplica o tema ANTES do paint (evita flicker/overlap).
  (function(){
    try{
      var t = localStorage.getItem('vasteria_theme') || 'coffee_caramel';
      var k = localStorage.getItem('vasteria_theme_kind') || 'minimal';
      // compat: 'caramel' antigo vira 'coffee_caramel'
      if(t === 'caramel') t = 'coffee_caramel';
      document.documentElement.setAttribute('data-theme', t);
      document.documentElement.setAttribute('data-theme-group', k);
    }catch(e){}
  })();
  </script>

  <link rel="stylesheet" href="cloud/online.css" />
  <link rel="stylesheet" href="library/library.css" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <!-- √öNICO bot√£o de temas -->
  <button class="dock-trigger-large open-themes" data-action="open-themes" title="Temas">üé®</button>

  <main class="hub-wrap">
    <header class="hub-user-header panel-skin">
      <div class="user-left">
        <div id="current-user-img" class="avatar-small">VG</div>
        <div class="meta">
          <strong id="current-user-nick">AGENTE</strong>
          <span id="current-user-name">‚Äî</span>
        </div>
        <button id="btn-edit-profile" class="icon-btn" title="Editar perfil">‚úèÔ∏è</button>
      </div>

      <div class="user-right">
        <button id="btn-create-hero" class="btn-blue" type="button">+ PERSONAGEM</button>
        <button id="btn-logout" class="btn-ghost" type="button">SAIR</button>
      </div>
    </header>

    <!-- NAV (abas do hub) -->
    <nav class="hub-nav panel-skin">
      <button class="nav-btn active" type="button">MEUS PERSONAGENS</button>

      <button class="nav-btn disabled" type="button" title="Em breve">
        UNIVERSO RPG <span class="badge">Em Breve</span>
      </button>
      <button class="nav-btn disabled" type="button" title="Em breve">
        PLAYER TOOLS <span class="badge">Em Breve</span>
      </button>
      <button class="nav-btn" id="nav-library" type="button">BIBLIOTECA</button>
      <button class="nav-btn disabled" type="button" title="Em breve">
        GUILDA <span class="badge">Em Breve</span>
      </button>
      <button class="nav-btn disabled" type="button" title="Em breve">
        AJUDA <span class="badge">Em Breve</span>
      </button>
      <button class="nav-btn disabled" type="button" title="Em breve">
        PLAYER AREA <span class="badge">Em Breve</span>
      </button>
          <button class="nav-btn" id="nav-online" type="button">ONLINE</button>
    </nav>

    <section class="hub-content">
      <div id="hero-list" class="hero-grid"></div>
    </section>
  </main>

  <!-- MODAL: criar personagem -->
  <div id="modal-create" class="modal-overlay" style="display:none;">
    <div class="modal-card panel-skin">
      <div class="modal-head">
        <h3>NOVO PERSONAGEM</h3>
        <button class="icon-btn" id="btn-close-create" title="Fechar">‚úï</button>
      </div>

      <div class="upload-row">
        <div class="upload-circle" id="char-photo-btn">
          <div id="char-preview" class="preview-circle"><span>+ FOTO</span></div>
        </div>
        <input type="file" id="char-file" accept="image/*" hidden />
        <div class="upload-help">
          <strong>Imagem do Personagem</strong>
          <span>Ela aparece no Hub e na Ficha.</span>
        </div>
      </div>

      <div class="field">
        <label>Nome do Personagem</label>
        <input id="new-name" placeholder="Ex: Kael, Seraphine..." />
      </div>
      <div class="field">
        <label>Nome do Jogador</label>
        <input id="new-player" placeholder="Seu nome" />
      </div>
      <div class="field">
        <label>Campanha</label>
        <input id="new-campaign" placeholder="Ex: Vasteria Gate" />
      </div>

      <div class="row-btn">
        <button id="btn-create-confirm" class="btn-blue" type="button">CRIAR</button>
        <button id="btn-create-cancel" class="btn-ghost" type="button">CANCELAR</button>
      </div>
    </div>
  </div>

  <!-- MODAL: editar perfil -->
  <div id="modal-profile" class="modal-overlay" style="display:none;">
    <div class="modal-card panel-skin">
      <div class="modal-head">
        <h3>EDITAR PERFIL</h3>
        <button class="icon-btn" id="btn-close-profile" title="Fechar">‚úï</button>
      </div>

      <div class="upload-row">
        <div class="upload-circle" id="profile-photo-btn">
          <div id="profile-preview" class="preview-circle"><span>+ FOTO</span></div>
        </div>
        <input type="file" id="profile-file" accept="image/*" hidden />
        <div class="upload-help">
          <strong>Foto de Perfil</strong>
          <span>Aparece no Hub e no Quickload.</span>
        </div>
      </div>

      <div class="field">
        <label>Nome</label>
        <input id="profile-name" placeholder="Seu nome" />
      </div>
      <div class="field">
        <label>Apelido (√∫nico)</label>
        <input id="profile-nick" placeholder="Seu apelido" />
      </div>


      <div class="mini-profile-box panel-skin">
        <div class="mini-profile-head">
          <h4>MINI PERFIL (AMIGOS)</h4>
          <p>Esse card aparece na aba <b>ONLINE ‚Üí Amigos</b>. Voc√™ pode personalizar banner e personagem favorito.</p>
        </div>

        <div class="mini-banner-row">
          <div id="mini-banner-preview" class="mini-banner-preview"><span>+ BANNER</span></div>
          <div class="mini-banner-actions">
            <button id="btn-mini-banner" class="btn-ghost" type="button">ESCOLHER BANNER</button>
            <input type="file" id="mini-banner-file" accept="image/*,image/gif" hidden />
            <div class="field" style="margin:10px 0 0;">
              <label>ou URL do banner (GIF ou imagem)</label>
              <input id="mini-banner-url" placeholder="https://... (gif/png/jpg/webp)" />
            </div>
            <small class="mini-hint">Dica: para GIF, cole um link direto (terminando em .gif) ou fa√ßa upload.</small>
          </div>
        </div>

        <div class="field">
          <label>Personagem favorito</label>
          <select id="mini-fav-hero">
            <option value="">‚Äî Nenhum ‚Äî</option>
          </select>
        </div>
      </div>

      <div class="row-btn">
        <button id="btn-profile-save" class="btn-blue" type="button">SALVAR</button>
        <button id="btn-profile-cancel" class="btn-ghost" type="button">CANCELAR</button>
      </div>
    </div>
  </div>

  <script src="auth.js"></script>
  <script src="firebase.config.js"></script>
  <script src="cloud/vgcloud.js"></script>
  <script src="themes.js"></script>
  <script src="bg.js"></script>
  <script src="home.js"></script>
  <script src="cloud/online.js"></script>
  <script src="library/library.js"></script>
</body>
</html>
